---
title: InputAndOutputFunctionsAndStreamsInDetail
date: 2016-10-19 01:13:37
tags:
---

`19 Oct 2016`
# 包含文件
- 对于c++ #include <iostream>： 解决所有标准输入输出头文件
- 对于c++ #include <fstream>: 解决所有文件输入输出头文件
- 对于c #include <stdio.h>: 为c所有输入输出头文件

## 输入
- cin 

输入原理：
程序的输入都建有一个缓冲区，即输入缓冲区。一次输入过程是这样的，当一次键盘输入结束时会(键入回车)将输入的数据存入输入缓冲区，而cin函数直接从输入缓冲区中取数据。正因为cin函数是直接从缓冲区取数据的，所以有时候当缓冲区中有残留数据时，cin函数会直接取得这些残留数据而不会请求键盘输入

`cin>>`
输入指定类型的数据，对于输入的单个数据对象遇到space、TAB、enter都结束输入

`cin.get() / cin.get(char) ／ cin.get(char,int) / cin.get(char*,int,char terminator)` 接收一个字符类似getchar()
cin.get()返回一个接收的字符，cin.get(char)把接收的字符存入char。cin.get(char,int) 输入一行字符int指示输入字符的数目，大于数目的输入会报错。三个参数的cin.get()类型cin.getline()。
函数如果读取成功返回1，如果失败(遇到文件结束符)返回0。

函数本身可以输入任何字符，连续输入情况下一般可以用输入终止字符EOF或者^Z字符判断结束输入。
其与getchar()的区别是getchar()不跳过任何字符，EOF字符也会输入。不能通过返回值来结束连续输入，必选自己判断结束输入。

`cin.getline()/ cin.getline(char*,int,char terminator = '\0')`
和cin.get()行为基本一样，除了get()如果遇到自定义结束符terminator时指针停在其上，下一个输入从结束符开始，而getline()把结束符当作一行结尾，从而跳过结束符从下一个字符开始输入。

- int scanf(const char * restrict format, …)

scanf（）返回成功接收的参数个数

<!--more-->

*格式字符串*
在Turbo C中格式字符串的一般形式为： [标志][输出最小宽度][.精度][长度]类型。其中方括号[]中的项为可选项。 
各项的意义介绍如下： 

类型：类型字符用以表示输出数据的类型，其格式符和意义如下表所示：

格式字符 |  意            义
---     |   --- 
d       |   以十进制形式输出带符号整数(正数不输出符号)
o       |   以八进制形式输出无符号整数(不输出前缀0)
x,X     |   以十六进制形式输出无符号整数(不输出前缀Ox)
u       |   以十进制形式输出无符号整数
f       |   以小数形式输出单、双精度实数
e,E     |   以指数形式输出单、双精度实数
g,G     |   以%f或%e中较短的输出宽度输出单、双精度实数
c       |   输出单个字符
s       |   输出字符串
 
标志：标志字符为-、+、#、空格四种，其意义下表所示：

标 志 |意        义
---  |  ---
-    | 结果左对齐，右边填空格
+    | 输出符号(正号或负号)
空格  | 输出值为正时冠以空格，为负时冠以负号
#    | 对c,s,d,u类无影响；对o类,在输出时加前缀o；对x类,在输出时加前缀0x；对e,g,f 类当结果有小数时才给出小数点

输入格式字符串的一般形式为：%[*][输入数据宽度][类型长度]类型 

“*”符:用以表示该输入项,读入后不赋予相应的变量，即跳过该输入值。
如：
> `scanf("%d %*d %d",&a,&b);`。

当输入为：1   2   3时，把1赋予a，2被跳过，3赋予b。

宽度:用十进制整数指定输入的宽度(即字符数)。
例如： 
>  `scanf("%5d",&a);` 

输入12345678只把12345赋予变量a，其余部分被截去。 

又如： 
> `scanf("%4d%4d",&a,&b); `

输入12345678将把1234赋予a，而把5678赋予b。

长度:长度格式符为l和h，l表示输入长整型数据(如%ld) 和双精度浮点数(如%lf)。h表示输入短整型数据。
使用scanf函数还必须注意以下几点： 

scanf函数中没有精度控制，如：`scanf("%5.2f",&a)`;是非法的。不能企图用此语句输入小数为2位的实数。

scanf中要求给出变量地址，如给出变量名则会出错。如`scanf("%d",a);`是非法的，应改为`scnaf("%d",&a);`才是合法的。

在输入多个数值数据时，若格式控制串中没有非格式字符作输入数据之间的间隔则可用空格，TAB或回车作间隔。C编译在碰到空格，TAB，回车或非法数据(如对“%d”输入“12A”时，A即为非法数据)时即认为该数据结束。
在输入字符数据时，若格式控制串中无非格式字符，则认为所有输入的字符均为有效字符。
例如： 
>   `scanf("%c%c%c",&a,&b,&c);` 

输入 d   e   f 则把'd'赋予a, ' ' 赋予b,'e'赋予c。只有当输入为 def 时，才能把'd'赋于a,'e'赋予b,'f'赋予c。 

如果在格式控制中加入空格作为间隔，如: 
> `scanf ("%c %c %c",&a,&b,&c);` 

则输入时各数据之间可加空格。

##  输出

- cout

`cout<<` 控制

> 需要加入头文件  `#include <iomanip\>`

除了可以用控制符来控制输出格式外，还可以通过调用流对象cout中用于控制输出格式的成员函数来控制输出格式。
用于控输出格式的流成员函数:

流成员函数    | 与之作用相同的控制符 | 作用
---         | ---               | ---
precision(n)|setprecision(n)    |设置实数的精度为n位
width(n)    |setw(n)            |设置字段宽度为n位
fill(c)     |setfill(c)         | 设置填充宇符c
setf()      | setiosflags()     |    设置输出格式状态，括号中应给出格式状态，内容与控制符setiosflags括号中的内容相同，如表13.5所示
unsetf()    |resetioflags()     |终止已设置的输出格式状态，在括号中应指定内容

流成员函数setf和控制符setiosflags括号中的参数表示格式状态，它是通过格式标志来指定的。格式标志在类ios中被定义为枚举值。因此在引用这些格式标志时要在前面加上类名ios和域运算符“::”。格式标志见表:

格式标志        | 作用
---           | ---
ios::left     |输出数据在本域宽范围内向左对齐
ios::right    |输出数据在本域宽范围内向右对齐
ios::internal |  数值的符号位在域宽内左对齐，数值右对齐，中间由填充字符填充
ios::dec      |设置整数的基数为10
ios::oct      |设置整数的基数为8
ios::hex      |设置整数的基数为16
ios::showbase  | 强制输出整数的基数(八进制数以0打头，十六进制数以0x打头)
ios::showpoint | 强制输出浮点数的小点和尾数0
ios::uppercase | 在以科学记数法格式E和以十六进制输出字母时以大写表示
ios::showpos   | 对正数显示“+”号
ios::scientific| 浮点数以科学记数法格式输出
ios::fixed     |浮点数以定点格式(小数形式)输出
ios::unitbuf   | 每次输出之后刷新所有的流
ios::stdio     |每次输出之后清除stdout, stderr


ps: 函数width(n)和控制符setw(n)只对其后的第一个输出项有效

- int printf(const char * restrict format, …)

printf（）返回成功打印的字符数。

printf 使用 format 字符串控制输出.字符串里的纯字符都会如实打印.echo 的转义序列会被解释.包括%与一个字母的格式指示符.用来指示相对应的参数字符串的格式化.

转义字符 |   意义                         | ASCII码值（十进制）
---     | ---                           | ---
\a      | 响铃(BEL)                      | 007
\b      |退格(BS) 将当前位置移到前一列      | 008
\f      |换页(FF)，将当前位置移到下页开头    | 012
\n      |换行(LF) ，将当前位置移到下一行开头 |  010
\r      |回车(CR) ，将当前位置移到本行开头   |013
\t      |水平制表(HT) （跳到下一个TAB位置）  |009
\v      |垂直制表(VT)                     |011
\\      |代表一个反斜线字符''\'             |092  ​   ​
\'      |代表一个单引号（撇号）字符          |039
\"      |代表一个双引号字符                 |034
\0      |空字符(NULL)                     |000
\ddd    |1到3位八进制数所代表的任意字符       |三位八进制
\xhh    |1到2位十六进制所代表的任意字符       |二位十六进制

printf格式化输出格式与scanf格式化输入的格式相同，可以用精度表示输出小数点后位数。
